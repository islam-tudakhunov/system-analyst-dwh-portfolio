# Кейс 1. Витрина контента для рекомендательной системы

## Обзор

Этот проект демонстрирует, как я разработал SQL-запрос, на основе которого дата-инженер построил единую **витрину признаков контента** для рекомендательной системы и аналитики.

Витрина объединяет:
- метаданные контента (статьи, рецепты);
- теги (ручные и автоматические);
- хлебные крошки (иерархия навигации);
- пользовательские взаимодействия (избранное, рейтинги, комментарии);
- структуру рецептов (шаги, время, сложность).

Все названия и структуры обезличены. Цель — показать мой подход как **системного аналитика DWH**.

## Моя роль

- Собрал и проанализировал требования от ML- и аналитических команд.  
- Спроектировал целевую структуру данных для SQL-запроса.  
- Описал источники данных (слои raw / ods / dm).  
- Реализовал SQL-логику объединения 7+ исходных таблиц в одну результирующую выборку.  
- Добавил базовые проверки качества данных (количество строк, NULL, дубликаты).  
- Подготовил документацию и передал запрос дата-инженеру для реализации витрины.

## Поток данных

`Raw` → `ODS` → `DM (content_feature_store)`

Источники данных включают:
- `raw.article_tags`, `raw.recipe_tags`
- `dct.tags`, `dct.breadcrumbs`
- `ods.content_comments`, `ods.content_favorites`, `ods.content_rating`
- `ods.articles`, `ods.recipes`, `ods.recipe_steps`
- `dm.content_materials`

## Структура таблицы (упрощённо)

- `material_id`, `material_type`, `title`, `url`
- `tag_ids`, `tag_titles`, `is_auto_tag`
- `comments` (array)
- `rating_count`, `rating_sum`
- `add_to_fav_count`
- поля рецептов (время, сложность, шаги)
- `breadcrumb_path`

Эта структура может использоваться как:
- **feature store** для моделей рекомендаций;
- **единая точка входа** для аналитики контента.

## Файлы

- `sql/content_feature_store.sql` — основной SQL-скрипт, написанный мной для формирования витрины  
- `docs/data_model.md` — описание целевой модели данных (поля и их назначение)

## Технологии

- SQL (аналитическое DWH)  
- CTE, объединения, агрегации, массивы  
- Моделирование DWH (Raw / ODS / DM)
